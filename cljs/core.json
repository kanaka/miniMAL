["do",

["def", "clj-str", "str"],
["def", "clj-println", "println"],
["def", "clj-list?", "list?"],
["def", "clj-contains?", "contains?"],
["def", "clj-keys", "keys"],
["def", "clj-vals", "vals"],

["def", "new", ["fn", ["a", "&", "b"],
  [".", "Reflect", ["`", "construct"], "a", "b"]]],
["def", "del", ["fn", ["a", "b"],
  [".", "Reflect", ["`", "deleteProperty"], "a", "b"]]],

["def", ">=", ["fn", ["a", "b"],
  ["if", ["<", "a", "b"], false, true]]],
["def", ">", ["fn", ["a", "b"],
  ["if", [">=", "a", "b"],
    ["if", ["=", "a", "b"], false, true],
    false]]],
["def", "<=", ["fn", ["a", "b"],
  ["if", [">", "a", "b"], false, true]]],

["def", "classOf", ["fn", ["a"],
  [".", [".-", [".-", "Object", ["`", "prototype"]], ["`", "toString"]],
        ["`", "call"], "a"]]],

["def", "null?", "nil?"],

["def", "pr-list*", ["fn", ["a", "b", "c"],
  ["apply", "clj-str",
    ["interpose", "b",
      ["map", ["fn", ["x"],
                ["if", "c",
                  ["print", "x"],
                  ["if", ["string?", "x"],
                    "x",
                    ["print", "x"]]]],
              "a"]]]]],
["def", "pr-str", ["fn", ["&", "a"],
  ["pr-list*", "a", ["`", " "], true]]],
["def", "str", ["fn", ["&", "a"],
  ["pr-list*", "a", ["`", ""], false]]],
["def", "prn", ["fn", ["&", "a"],
  ["do", ["clj-println", ["pr-list*", "a", ["`", " "], true]], null]]],
["def", "println", ["fn", ["&", "a"],
  ["do", ["clj-println", ["pr-list*", "a", ["`", " "], false]], null]]],

["def", "list?", ["fn", ["a"],
  ["if", ["clj-list?", "a"], true, ["array?", "a"]]]],
["def", "contains?", ["fn", ["a", "b"],
  ["if", ["object?", "a"],
    ["not", ["undefined?", ["aget", "a", "b"]]],
    ["clj-contains?", "a", "b"]]]],
["def", "get", ["fn", ["a", "b"],
  ["let", ["res", ["aget", "a", "b"]],
    ["if", ["undefined?", "res"], null, "res"]]]],
["def", "set", ["fn", ["a", "b", "c"],
  ["do", ["aset", "a", "b", "c"], "a"]]],
["def", "keys", ["fn", ["a"],
  ["apply", "array", ["clj-keys", ["js->clj", "a"]]]]],
["def", "vals", ["fn", ["a"],
  ["apply", "array", ["clj-vals", ["js->clj", "a"]]]]],

["def", "and", ["~", ["fn", ["&", "xs"],
  ["if", ["empty?", "xs"],
    true,
    ["if", ["=", 1, ["count", "xs"]],
      ["first", "xs"],
      ["list", ["`", "let"], ["list", ["`", "and_FIXME"], ["first", "xs"]],
        ["list", ["`", "if"], ["`", "and_FIXME"],
          ["concat", ["`", ["and"]], ["rest", "xs"]],
          ["`", "and_FIXME"]]]]]]]],

["def", "or", ["~", ["fn", ["&", "xs"],
  ["if", ["empty?", "xs"],
    null,
    ["if", ["=", 1, ["count", "xs"]],
      ["first", "xs"],
      ["list", ["`", "let"], ["list", ["`", "or_FIXME"], ["first", "xs"]],
        ["list", ["`", "if"], ["`", "or_FIXME"],
          ["`", "or_FIXME"],
          ["concat", ["`", ["or"]], ["rest", "xs"]]]]]]]]],

null
]

